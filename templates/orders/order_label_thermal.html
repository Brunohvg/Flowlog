<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>{{ order.code }} - T√©rmica</title>
    <style>
        @page { size: 80mm auto; margin: 2mm; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Courier New', monospace; }
        body { background: #f5f5f5; }
        
        /* Controles - n√£o imprime */
        .no-print {
            background: #1e293b; color: white; padding: 10px 15px;
            display: flex; align-items: center; justify-content: space-between;
            font-family: Arial, sans-serif;
        }
        .no-print h1 { font-size: 14px; font-weight: bold; }
        .btn { 
            padding: 6px 12px; font-size: 12px; font-weight: bold; 
            border-radius: 4px; border: none; cursor: pointer; 
            margin-left: 5px; text-decoration: none; display: inline-block;
        }
        .btn-print { background: #6366f1; color: #fff; }
        .btn-back { background: #475569; color: #fff; }
        
        /* Container */
        .wrapper { padding: 10px; display: flex; justify-content: center; }
        
        /* Etiqueta T√©rmica */
        .label {
            width: 76mm;
            background: #fff;
            border: 1px solid #000;
            padding: 3mm;
        }
        
        /* Header */
        .header {
            text-align: center;
            padding-bottom: 2mm;
            border-bottom: 2px dashed #000;
        }
        .code { font-size: 22px; font-weight: bold; }
        .type { font-size: 10px; font-weight: bold; margin-top: 1mm; }
        
        /* Se√ß√µes */
        .section { padding: 2mm 0; border-bottom: 1px dashed #999; }
        .label-text { font-size: 8px; font-weight: bold; color: #666; }
        .value-text { font-size: 12px; font-weight: bold; }
        
        /* Endere√ßo */
        .address {
            padding: 2mm;
            margin: 2mm 0;
            border: 2px solid #000;
        }
        .address-text { font-size: 11px; font-weight: bold; line-height: 1.3; }
        
        /* Observa√ß√µes */
        .obs {
            padding: 2mm;
            margin: 2mm 0;
            background: #f5f5f5;
            border-left: 3px solid #000;
        }
        .obs-text { font-size: 10px; font-weight: bold; }
        
        /* C√≥digo Retirada */
        .pickup {
            text-align: center;
            padding: 3mm;
            background: #000;
            color: #fff;
            margin: 2mm 0;
        }
        .pickup-code { font-size: 28px; font-weight: bold; letter-spacing: 3px; }
        
        /* Footer */
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 2mm;
            border-top: 2px dashed #000;
            margin-top: 2mm;
        }
        .date { font-size: 8px; color: #666; }
        .value { font-size: 16px; font-weight: bold; }
        
        /* Motoboy */
        .motoboy {
            font-size: 9px;
            padding: 1mm 0;
            border-top: 1px dashed #999;
            margin-top: 1mm;
        }
        
        @media print {
            body { background: #fff; }
            .no-print { display: none !important; }
            .wrapper { padding: 0; }
            .label { border: none; }
        }
    </style>
</head>
<body>

<!-- Controles -->
<div class="no-print">
    <h1>üè∑Ô∏è {{ order.code }}</h1>
    <div>
        <a href="{% url 'order_label' order.id %}" class="btn btn-back">üìÑ Padr√£o</a>
        <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è Imprimir</button>
    </div>
</div>

<!-- Etiqueta -->
<div class="wrapper">
    <div class="label">
        
        <!-- Header -->
        <div class="header">
            <div class="code">{{ order.code }}</div>
            <div class="type">{{ order.get_delivery_type_display|upper }}</div>
        </div>
        
        <!-- Cliente -->
        <div class="section">
            <div class="label-text">CLIENTE</div>
            <div class="value-text">{{ order.customer.name }}</div>
            <div style="font-size:10px;">{{ order.customer.phone }}</div>
        </div>
        
        <!-- Endere√ßo -->
        {% if order.delivery_type != 'pickup' and order.delivery_address %}
        <div class="address">
            <div class="label-text">üìç ENTREGAR:</div>
            <div class="address-text">{{ order.delivery_address }}</div>
        </div>
        {% endif %}
        
        <!-- C√≥digo Retirada -->
        {% if order.delivery_type == 'pickup' and order.pickup_code %}
        <div class="pickup">
            <div style="font-size:8px;">C√ìDIGO RETIRADA</div>
            <div class="pickup-code">{{ order.pickup_code }}</div>
        </div>
        {% endif %}
        
        <!-- Observa√ß√µes -->
        {% if order.notes %}
        <div class="obs">
            <div class="label-text">‚ö†Ô∏è OBS:</div>
            <div class="obs-text">{{ order.notes }}</div>
        </div>
        {% endif %}
        
        <!-- Motoboy -->
        {% if order.delivery_type == 'motoboy' and order.motoboy_fee %}
        <div class="motoboy">
            üèçÔ∏è MOTOBOY: R$ {{ order.motoboy_fee|floatformat:2 }}
            {% if order.motoboy_paid %}‚úì PAGO{% else %}‚ö† N√ÉO PAGO{% endif %}
        </div>
        {% endif %}
        
        <!-- Footer -->
        <div class="footer">
            <span class="date">{{ order.created_at|date:"d/m/Y H:i" }}</span>
            <span class="value">R$ {{ order.total_value|floatformat:2 }}</span>
        </div>
        
    </div>
</div>

</body>
</html>
